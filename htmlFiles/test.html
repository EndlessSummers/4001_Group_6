<html>
  <head>
    <link href="./main.css" rel="stylesheet">
    <link href="./external.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
  <div class="wrapper-hor">
  <span id='close' onclick='close(event)'>x</span>
    <div class="left">
        <img src="./imgs/Nick_Wilde.jpeg" id="chg_usr_p" alt="user" width="100" style="cursor: pointer;">
        <input type="file" id="img_slt" onchange="" style="display: none;">
        <!-- <h4>Nick Wilde</h4> -->
        <p style="font-size: 19px; font-weight: 700; color: #000; margin-top: 12px; line-height: 1.1;">Nick Wilde</p>
        <!-- <input type="text" value="" style="width: 100%;"> -->
        <p>Officer of Zootopia</p>
        <div class="bottom-btn">
          <button class="btn btn-info btn-sm" id="edit"> edit </button>
          <button class="btn btn-info btn-sm" id="save"> save </button>
        </div>
    </div>
    <div class="right">
      <div class="info">
        <h3>Information</h3>
        <div class="info_data">
          <div class="data">
            <h4>Email</h4>
            <p>nick@zootopia.com</p>
          </div>
          <div class="data">
            <h4>Phone</h4>
            <p>0001-213-998761</p>
          </div>
        </div>
      </div>
      
      <div class="projects">
            <h3>Recent</h3>
            <div class="projects_data">
                 <div class="data">
                    <h4>Likes</h4>
                    <p>Hunting</p>
                 </div>
                 <div class="data">
                   <h4>Want To Try</h4>
                    <p>Vegetarian</p>
              </div>
            </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function(event) {
      $('#chg_usr_p').click(function() {
        console.log("img btn clicked");
        $("#img_slt").click();
      });
    });

    $('#edit').click(function() {
      var infos = document.getElementsByTagName('p');
      for (i=0; i<infos.length; i++) {
        let inputText = "<input type='text' value='' style='width: 100%;'>";
        let input = infos[i].innerHTML;
        infos[i].innerHTML = inputText.replace(/value=''/, function(x){
          return x.slice(0, x.length-1) + input + x.slice(x.length-1);
        })
        // replace does not modify the original text;
      }
    });

    $('#save').click(function() {
      var infos = document.getElementsByTagName('p');
      for (i=0; i<infos.length; i++) {
        let input = infos[i].firstChild.value;
        infos[i].innerHTML = input;
      }
    });
      
    $("#img_slt").on("change", function(){
      console.log("changePic() called");
      var selectedFile = document.getElementById('img_slt').files[0];
      var img = document.getElementById('chg_usr_p');
      var reader = new FileReader();
      reader.onload = function() {
        img.src = this.result
      }
      reader.readAsDataURL(selectedFile);
    });
  </script>
  <script src="./main.js" type="text/javascript"></script>
  <script src="./external.js" type="text/javascript"></script>
  </body>
</html>